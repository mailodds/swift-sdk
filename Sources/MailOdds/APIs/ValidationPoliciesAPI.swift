//
// ValidationPoliciesAPI.swift
//
// Generated by openapi-generator
// https://openapi-generator.tech
//

import Foundation

open class ValidationPoliciesAPI {

    /**
     Add rule to policy
     
     - parameter policyId: (path)  
     - parameter policyRule: (body)  
     - parameter apiConfiguration: The configuration for the http request.
     - returns: AddPolicyRule201Response
     */
    @available(macOS 10.15, iOS 13.0, tvOS 13.0, watchOS 6.0, *)
    open class func addPolicyRule(policyId: Int, policyRule: PolicyRule, apiConfiguration: MailOddsAPIConfiguration = MailOddsAPIConfiguration.shared) async throws(ErrorResponse) -> AddPolicyRule201Response {
        return try await addPolicyRuleWithRequestBuilder(policyId: policyId, policyRule: policyRule, apiConfiguration: apiConfiguration).execute().body
    }

    /**
     Add rule to policy
     - POST /v1/policies/{policy_id}/rules
     - Add a new rule to an existing policy.
     - Bearer Token:
       - type: http
       - name: BearerAuth
     - parameter policyId: (path)  
     - parameter policyRule: (body)  
     - parameter apiConfiguration: The configuration for the http request.
     - returns: RequestBuilder<AddPolicyRule201Response> 
     */
    open class func addPolicyRuleWithRequestBuilder(policyId: Int, policyRule: PolicyRule, apiConfiguration: MailOddsAPIConfiguration = MailOddsAPIConfiguration.shared) -> RequestBuilder<AddPolicyRule201Response> {
        var localVariablePath = "/v1/policies/{policy_id}/rules"
        let policyIdPreEscape = "\(APIHelper.mapValueToPathItem(policyId))"
        let policyIdPostEscape = policyIdPreEscape.addingPercentEncoding(withAllowedCharacters: .urlPathAllowed) ?? ""
        localVariablePath = localVariablePath.replacingOccurrences(of: "{policy_id}", with: policyIdPostEscape, options: .literal, range: nil)
        let localVariableURLString = apiConfiguration.basePath + localVariablePath
        let localVariableParameters = JSONEncodingHelper.encodingParameters(forEncodableObject: policyRule, codableHelper: apiConfiguration.codableHelper)

        let localVariableUrlComponents = URLComponents(string: localVariableURLString)

        let localVariableNillableHeaders: [String: (any Sendable)?] = [
            "Content-Type": "application/json",
        ]

        let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

        let localVariableRequestBuilder: RequestBuilder<AddPolicyRule201Response>.Type = apiConfiguration.requestBuilderFactory.getBuilder()

        return localVariableRequestBuilder.init(method: "POST", URLString: (localVariableUrlComponents?.string ?? localVariableURLString), parameters: localVariableParameters, headers: localVariableHeaderParameters, requiresAuthentication: true, apiConfiguration: apiConfiguration)
    }

    /**
     Create policy
     
     - parameter createPolicyRequest: (body)  
     - parameter apiConfiguration: The configuration for the http request.
     - returns: PolicyResponse
     */
    @available(macOS 10.15, iOS 13.0, tvOS 13.0, watchOS 6.0, *)
    open class func createPolicy(createPolicyRequest: CreatePolicyRequest, apiConfiguration: MailOddsAPIConfiguration = MailOddsAPIConfiguration.shared) async throws(ErrorResponse) -> PolicyResponse {
        return try await createPolicyWithRequestBuilder(createPolicyRequest: createPolicyRequest, apiConfiguration: apiConfiguration).execute().body
    }

    /**
     Create policy
     - POST /v1/policies
     - Create a new validation policy with rules.
     - Bearer Token:
       - type: http
       - name: BearerAuth
     - parameter createPolicyRequest: (body)  
     - parameter apiConfiguration: The configuration for the http request.
     - returns: RequestBuilder<PolicyResponse> 
     */
    open class func createPolicyWithRequestBuilder(createPolicyRequest: CreatePolicyRequest, apiConfiguration: MailOddsAPIConfiguration = MailOddsAPIConfiguration.shared) -> RequestBuilder<PolicyResponse> {
        let localVariablePath = "/v1/policies"
        let localVariableURLString = apiConfiguration.basePath + localVariablePath
        let localVariableParameters = JSONEncodingHelper.encodingParameters(forEncodableObject: createPolicyRequest, codableHelper: apiConfiguration.codableHelper)

        let localVariableUrlComponents = URLComponents(string: localVariableURLString)

        let localVariableNillableHeaders: [String: (any Sendable)?] = [
            "Content-Type": "application/json",
        ]

        let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

        let localVariableRequestBuilder: RequestBuilder<PolicyResponse>.Type = apiConfiguration.requestBuilderFactory.getBuilder()

        return localVariableRequestBuilder.init(method: "POST", URLString: (localVariableUrlComponents?.string ?? localVariableURLString), parameters: localVariableParameters, headers: localVariableHeaderParameters, requiresAuthentication: true, apiConfiguration: apiConfiguration)
    }

    /**
     Create policy from preset
     
     - parameter createPolicyFromPresetRequest: (body)  
     - parameter apiConfiguration: The configuration for the http request.
     - returns: PolicyResponse
     */
    @available(macOS 10.15, iOS 13.0, tvOS 13.0, watchOS 6.0, *)
    open class func createPolicyFromPreset(createPolicyFromPresetRequest: CreatePolicyFromPresetRequest, apiConfiguration: MailOddsAPIConfiguration = MailOddsAPIConfiguration.shared) async throws(ErrorResponse) -> PolicyResponse {
        return try await createPolicyFromPresetWithRequestBuilder(createPolicyFromPresetRequest: createPolicyFromPresetRequest, apiConfiguration: apiConfiguration).execute().body
    }

    /**
     Create policy from preset
     - POST /v1/policies/from-preset
     - Create a policy using a preset template.
     - Bearer Token:
       - type: http
       - name: BearerAuth
     - parameter createPolicyFromPresetRequest: (body)  
     - parameter apiConfiguration: The configuration for the http request.
     - returns: RequestBuilder<PolicyResponse> 
     */
    open class func createPolicyFromPresetWithRequestBuilder(createPolicyFromPresetRequest: CreatePolicyFromPresetRequest, apiConfiguration: MailOddsAPIConfiguration = MailOddsAPIConfiguration.shared) -> RequestBuilder<PolicyResponse> {
        let localVariablePath = "/v1/policies/from-preset"
        let localVariableURLString = apiConfiguration.basePath + localVariablePath
        let localVariableParameters = JSONEncodingHelper.encodingParameters(forEncodableObject: createPolicyFromPresetRequest, codableHelper: apiConfiguration.codableHelper)

        let localVariableUrlComponents = URLComponents(string: localVariableURLString)

        let localVariableNillableHeaders: [String: (any Sendable)?] = [
            "Content-Type": "application/json",
        ]

        let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

        let localVariableRequestBuilder: RequestBuilder<PolicyResponse>.Type = apiConfiguration.requestBuilderFactory.getBuilder()

        return localVariableRequestBuilder.init(method: "POST", URLString: (localVariableUrlComponents?.string ?? localVariableURLString), parameters: localVariableParameters, headers: localVariableHeaderParameters, requiresAuthentication: true, apiConfiguration: apiConfiguration)
    }

    /**
     Delete policy
     
     - parameter policyId: (path)  
     - parameter apiConfiguration: The configuration for the http request.
     - returns: DeletePolicy200Response
     */
    @available(macOS 10.15, iOS 13.0, tvOS 13.0, watchOS 6.0, *)
    open class func deletePolicy(policyId: Int, apiConfiguration: MailOddsAPIConfiguration = MailOddsAPIConfiguration.shared) async throws(ErrorResponse) -> DeletePolicy200Response {
        return try await deletePolicyWithRequestBuilder(policyId: policyId, apiConfiguration: apiConfiguration).execute().body
    }

    /**
     Delete policy
     - DELETE /v1/policies/{policy_id}
     - Delete a policy and all its rules.
     - Bearer Token:
       - type: http
       - name: BearerAuth
     - parameter policyId: (path)  
     - parameter apiConfiguration: The configuration for the http request.
     - returns: RequestBuilder<DeletePolicy200Response> 
     */
    open class func deletePolicyWithRequestBuilder(policyId: Int, apiConfiguration: MailOddsAPIConfiguration = MailOddsAPIConfiguration.shared) -> RequestBuilder<DeletePolicy200Response> {
        var localVariablePath = "/v1/policies/{policy_id}"
        let policyIdPreEscape = "\(APIHelper.mapValueToPathItem(policyId))"
        let policyIdPostEscape = policyIdPreEscape.addingPercentEncoding(withAllowedCharacters: .urlPathAllowed) ?? ""
        localVariablePath = localVariablePath.replacingOccurrences(of: "{policy_id}", with: policyIdPostEscape, options: .literal, range: nil)
        let localVariableURLString = apiConfiguration.basePath + localVariablePath
        let localVariableParameters: [String: any Sendable]? = nil

        let localVariableUrlComponents = URLComponents(string: localVariableURLString)

        let localVariableNillableHeaders: [String: (any Sendable)?] = [
            :
        ]

        let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

        let localVariableRequestBuilder: RequestBuilder<DeletePolicy200Response>.Type = apiConfiguration.requestBuilderFactory.getBuilder()

        return localVariableRequestBuilder.init(method: "DELETE", URLString: (localVariableUrlComponents?.string ?? localVariableURLString), parameters: localVariableParameters, headers: localVariableHeaderParameters, requiresAuthentication: true, apiConfiguration: apiConfiguration)
    }

    /**
     Delete rule
     
     - parameter policyId: (path)  
     - parameter ruleId: (path)  
     - parameter apiConfiguration: The configuration for the http request.
     - returns: DeletePolicyRule200Response
     */
    @available(macOS 10.15, iOS 13.0, tvOS 13.0, watchOS 6.0, *)
    open class func deletePolicyRule(policyId: Int, ruleId: Int, apiConfiguration: MailOddsAPIConfiguration = MailOddsAPIConfiguration.shared) async throws(ErrorResponse) -> DeletePolicyRule200Response {
        return try await deletePolicyRuleWithRequestBuilder(policyId: policyId, ruleId: ruleId, apiConfiguration: apiConfiguration).execute().body
    }

    /**
     Delete rule
     - DELETE /v1/policies/{policy_id}/rules/{rule_id}
     - Delete a rule from a policy.
     - Bearer Token:
       - type: http
       - name: BearerAuth
     - parameter policyId: (path)  
     - parameter ruleId: (path)  
     - parameter apiConfiguration: The configuration for the http request.
     - returns: RequestBuilder<DeletePolicyRule200Response> 
     */
    open class func deletePolicyRuleWithRequestBuilder(policyId: Int, ruleId: Int, apiConfiguration: MailOddsAPIConfiguration = MailOddsAPIConfiguration.shared) -> RequestBuilder<DeletePolicyRule200Response> {
        var localVariablePath = "/v1/policies/{policy_id}/rules/{rule_id}"
        let policyIdPreEscape = "\(APIHelper.mapValueToPathItem(policyId))"
        let policyIdPostEscape = policyIdPreEscape.addingPercentEncoding(withAllowedCharacters: .urlPathAllowed) ?? ""
        localVariablePath = localVariablePath.replacingOccurrences(of: "{policy_id}", with: policyIdPostEscape, options: .literal, range: nil)
        let ruleIdPreEscape = "\(APIHelper.mapValueToPathItem(ruleId))"
        let ruleIdPostEscape = ruleIdPreEscape.addingPercentEncoding(withAllowedCharacters: .urlPathAllowed) ?? ""
        localVariablePath = localVariablePath.replacingOccurrences(of: "{rule_id}", with: ruleIdPostEscape, options: .literal, range: nil)
        let localVariableURLString = apiConfiguration.basePath + localVariablePath
        let localVariableParameters: [String: any Sendable]? = nil

        let localVariableUrlComponents = URLComponents(string: localVariableURLString)

        let localVariableNillableHeaders: [String: (any Sendable)?] = [
            :
        ]

        let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

        let localVariableRequestBuilder: RequestBuilder<DeletePolicyRule200Response>.Type = apiConfiguration.requestBuilderFactory.getBuilder()

        return localVariableRequestBuilder.init(method: "DELETE", URLString: (localVariableUrlComponents?.string ?? localVariableURLString), parameters: localVariableParameters, headers: localVariableHeaderParameters, requiresAuthentication: true, apiConfiguration: apiConfiguration)
    }

    /**
     Get policy
     
     - parameter policyId: (path)  
     - parameter apiConfiguration: The configuration for the http request.
     - returns: PolicyResponse
     */
    @available(macOS 10.15, iOS 13.0, tvOS 13.0, watchOS 6.0, *)
    open class func getPolicy(policyId: Int, apiConfiguration: MailOddsAPIConfiguration = MailOddsAPIConfiguration.shared) async throws(ErrorResponse) -> PolicyResponse {
        return try await getPolicyWithRequestBuilder(policyId: policyId, apiConfiguration: apiConfiguration).execute().body
    }

    /**
     Get policy
     - GET /v1/policies/{policy_id}
     - Get a single policy with its rules.
     - Bearer Token:
       - type: http
       - name: BearerAuth
     - parameter policyId: (path)  
     - parameter apiConfiguration: The configuration for the http request.
     - returns: RequestBuilder<PolicyResponse> 
     */
    open class func getPolicyWithRequestBuilder(policyId: Int, apiConfiguration: MailOddsAPIConfiguration = MailOddsAPIConfiguration.shared) -> RequestBuilder<PolicyResponse> {
        var localVariablePath = "/v1/policies/{policy_id}"
        let policyIdPreEscape = "\(APIHelper.mapValueToPathItem(policyId))"
        let policyIdPostEscape = policyIdPreEscape.addingPercentEncoding(withAllowedCharacters: .urlPathAllowed) ?? ""
        localVariablePath = localVariablePath.replacingOccurrences(of: "{policy_id}", with: policyIdPostEscape, options: .literal, range: nil)
        let localVariableURLString = apiConfiguration.basePath + localVariablePath
        let localVariableParameters: [String: any Sendable]? = nil

        let localVariableUrlComponents = URLComponents(string: localVariableURLString)

        let localVariableNillableHeaders: [String: (any Sendable)?] = [
            :
        ]

        let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

        let localVariableRequestBuilder: RequestBuilder<PolicyResponse>.Type = apiConfiguration.requestBuilderFactory.getBuilder()

        return localVariableRequestBuilder.init(method: "GET", URLString: (localVariableUrlComponents?.string ?? localVariableURLString), parameters: localVariableParameters, headers: localVariableHeaderParameters, requiresAuthentication: true, apiConfiguration: apiConfiguration)
    }

    /**
     Get policy presets
     
     - parameter apiConfiguration: The configuration for the http request.
     - returns: PolicyPresetsResponse
     */
    @available(macOS 10.15, iOS 13.0, tvOS 13.0, watchOS 6.0, *)
    open class func getPolicyPresets(apiConfiguration: MailOddsAPIConfiguration = MailOddsAPIConfiguration.shared) async throws(ErrorResponse) -> PolicyPresetsResponse {
        return try await getPolicyPresetsWithRequestBuilder(apiConfiguration: apiConfiguration).execute().body
    }

    /**
     Get policy presets
     - GET /v1/policies/presets
     - Get available preset templates for quick policy creation.
     - Bearer Token:
       - type: http
       - name: BearerAuth
     - parameter apiConfiguration: The configuration for the http request.
     - returns: RequestBuilder<PolicyPresetsResponse> 
     */
    open class func getPolicyPresetsWithRequestBuilder(apiConfiguration: MailOddsAPIConfiguration = MailOddsAPIConfiguration.shared) -> RequestBuilder<PolicyPresetsResponse> {
        let localVariablePath = "/v1/policies/presets"
        let localVariableURLString = apiConfiguration.basePath + localVariablePath
        let localVariableParameters: [String: any Sendable]? = nil

        let localVariableUrlComponents = URLComponents(string: localVariableURLString)

        let localVariableNillableHeaders: [String: (any Sendable)?] = [
            :
        ]

        let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

        let localVariableRequestBuilder: RequestBuilder<PolicyPresetsResponse>.Type = apiConfiguration.requestBuilderFactory.getBuilder()

        return localVariableRequestBuilder.init(method: "GET", URLString: (localVariableUrlComponents?.string ?? localVariableURLString), parameters: localVariableParameters, headers: localVariableHeaderParameters, requiresAuthentication: true, apiConfiguration: apiConfiguration)
    }

    /**
     List policies
     
     - parameter includeRules: (query) Include full rules in response (optional, default to false)
     - parameter apiConfiguration: The configuration for the http request.
     - returns: PolicyListResponse
     */
    @available(macOS 10.15, iOS 13.0, tvOS 13.0, watchOS 6.0, *)
    open class func listPolicies(includeRules: Bool? = nil, apiConfiguration: MailOddsAPIConfiguration = MailOddsAPIConfiguration.shared) async throws(ErrorResponse) -> PolicyListResponse {
        return try await listPoliciesWithRequestBuilder(includeRules: includeRules, apiConfiguration: apiConfiguration).execute().body
    }

    /**
     List policies
     - GET /v1/policies
     - List all validation policies for your account. Includes plan limits.
     - Bearer Token:
       - type: http
       - name: BearerAuth
     - parameter includeRules: (query) Include full rules in response (optional, default to false)
     - parameter apiConfiguration: The configuration for the http request.
     - returns: RequestBuilder<PolicyListResponse> 
     */
    open class func listPoliciesWithRequestBuilder(includeRules: Bool? = nil, apiConfiguration: MailOddsAPIConfiguration = MailOddsAPIConfiguration.shared) -> RequestBuilder<PolicyListResponse> {
        let localVariablePath = "/v1/policies"
        let localVariableURLString = apiConfiguration.basePath + localVariablePath
        let localVariableParameters: [String: any Sendable]? = nil

        var localVariableUrlComponents = URLComponents(string: localVariableURLString)
        localVariableUrlComponents?.queryItems = APIHelper.mapValuesToQueryItems([
            "include_rules": (wrappedValue: includeRules?.asParameter(codableHelper: apiConfiguration.codableHelper), isExplode: true),
        ])

        let localVariableNillableHeaders: [String: (any Sendable)?] = [
            :
        ]

        let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

        let localVariableRequestBuilder: RequestBuilder<PolicyListResponse>.Type = apiConfiguration.requestBuilderFactory.getBuilder()

        return localVariableRequestBuilder.init(method: "GET", URLString: (localVariableUrlComponents?.string ?? localVariableURLString), parameters: localVariableParameters, headers: localVariableHeaderParameters, requiresAuthentication: true, apiConfiguration: apiConfiguration)
    }

    /**
     Test policy evaluation
     
     - parameter testPolicyRequest: (body)  
     - parameter apiConfiguration: The configuration for the http request.
     - returns: PolicyTestResponse
     */
    @available(macOS 10.15, iOS 13.0, tvOS 13.0, watchOS 6.0, *)
    open class func testPolicy(testPolicyRequest: TestPolicyRequest, apiConfiguration: MailOddsAPIConfiguration = MailOddsAPIConfiguration.shared) async throws(ErrorResponse) -> PolicyTestResponse {
        return try await testPolicyWithRequestBuilder(testPolicyRequest: testPolicyRequest, apiConfiguration: apiConfiguration).execute().body
    }

    /**
     Test policy evaluation
     - POST /v1/policies/test
     - Test how a policy would evaluate a validation result without affecting production.
     - Bearer Token:
       - type: http
       - name: BearerAuth
     - parameter testPolicyRequest: (body)  
     - parameter apiConfiguration: The configuration for the http request.
     - returns: RequestBuilder<PolicyTestResponse> 
     */
    open class func testPolicyWithRequestBuilder(testPolicyRequest: TestPolicyRequest, apiConfiguration: MailOddsAPIConfiguration = MailOddsAPIConfiguration.shared) -> RequestBuilder<PolicyTestResponse> {
        let localVariablePath = "/v1/policies/test"
        let localVariableURLString = apiConfiguration.basePath + localVariablePath
        let localVariableParameters = JSONEncodingHelper.encodingParameters(forEncodableObject: testPolicyRequest, codableHelper: apiConfiguration.codableHelper)

        let localVariableUrlComponents = URLComponents(string: localVariableURLString)

        let localVariableNillableHeaders: [String: (any Sendable)?] = [
            "Content-Type": "application/json",
        ]

        let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

        let localVariableRequestBuilder: RequestBuilder<PolicyTestResponse>.Type = apiConfiguration.requestBuilderFactory.getBuilder()

        return localVariableRequestBuilder.init(method: "POST", URLString: (localVariableUrlComponents?.string ?? localVariableURLString), parameters: localVariableParameters, headers: localVariableHeaderParameters, requiresAuthentication: true, apiConfiguration: apiConfiguration)
    }

    /**
     Update policy
     
     - parameter policyId: (path)  
     - parameter updatePolicyRequest: (body)  
     - parameter apiConfiguration: The configuration for the http request.
     - returns: PolicyResponse
     */
    @available(macOS 10.15, iOS 13.0, tvOS 13.0, watchOS 6.0, *)
    open class func updatePolicy(policyId: Int, updatePolicyRequest: UpdatePolicyRequest, apiConfiguration: MailOddsAPIConfiguration = MailOddsAPIConfiguration.shared) async throws(ErrorResponse) -> PolicyResponse {
        return try await updatePolicyWithRequestBuilder(policyId: policyId, updatePolicyRequest: updatePolicyRequest, apiConfiguration: apiConfiguration).execute().body
    }

    /**
     Update policy
     - PUT /v1/policies/{policy_id}
     - Update a policy's settings (name, enabled, default).
     - Bearer Token:
       - type: http
       - name: BearerAuth
     - parameter policyId: (path)  
     - parameter updatePolicyRequest: (body)  
     - parameter apiConfiguration: The configuration for the http request.
     - returns: RequestBuilder<PolicyResponse> 
     */
    open class func updatePolicyWithRequestBuilder(policyId: Int, updatePolicyRequest: UpdatePolicyRequest, apiConfiguration: MailOddsAPIConfiguration = MailOddsAPIConfiguration.shared) -> RequestBuilder<PolicyResponse> {
        var localVariablePath = "/v1/policies/{policy_id}"
        let policyIdPreEscape = "\(APIHelper.mapValueToPathItem(policyId))"
        let policyIdPostEscape = policyIdPreEscape.addingPercentEncoding(withAllowedCharacters: .urlPathAllowed) ?? ""
        localVariablePath = localVariablePath.replacingOccurrences(of: "{policy_id}", with: policyIdPostEscape, options: .literal, range: nil)
        let localVariableURLString = apiConfiguration.basePath + localVariablePath
        let localVariableParameters = JSONEncodingHelper.encodingParameters(forEncodableObject: updatePolicyRequest, codableHelper: apiConfiguration.codableHelper)

        let localVariableUrlComponents = URLComponents(string: localVariableURLString)

        let localVariableNillableHeaders: [String: (any Sendable)?] = [
            "Content-Type": "application/json",
        ]

        let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

        let localVariableRequestBuilder: RequestBuilder<PolicyResponse>.Type = apiConfiguration.requestBuilderFactory.getBuilder()

        return localVariableRequestBuilder.init(method: "PUT", URLString: (localVariableUrlComponents?.string ?? localVariableURLString), parameters: localVariableParameters, headers: localVariableHeaderParameters, requiresAuthentication: true, apiConfiguration: apiConfiguration)
    }
}
